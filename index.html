<!DOCTYPE html>
<html>
<head>
    <title>Arena Bot</title>
</head>
<body>
    <h1>Arena Bot</h1>
    <label for="token">Ð¢Ð¾ÐºÐµÐ½:</label>
    <input type="text" id="token" placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½"><br>
    <button onclick="start()">Ð¡Ñ‚Ð°Ñ€Ñ‚</button>

    <div id="output"></div>

    <script>
        function arenaFunction() {
          const url = "https://api.vk.com/method/messages.send?";
          let countArena = 0;
        
          function sendRequest() {
            countArena++;
            
            if (countArena % 10 === 0) {
              const params = new URLSearchParams({
                access_token: token,
                peer_id: chatId,
                message: "ÐºÐ¾Ð¼Ð¼Ð¸ÑÐ¸Ñ",
                payload: '{"type":"perevod"}',
                random_id: 0,
                v: "5.131"
              });
              
              fetch(url + params)
                .then(response => response.json())
                .then(() => {
                  setTimeout(() => {
                    const params = new URLSearchParams({
                      access_token: token,
                      peer_id: chatId,
                      message: "https://vk.com/mirbau",
                      random_id: 0,
                      v: "5.131"
                    });
                    
                    fetch(url + params);
                  }, 3000);
                  
                  setTimeout(() => {
                    const params = new URLSearchParams({
                      access_token: token,
                      peer_id: chatId,
                      message: "101",
                      random_id: 0,
                      v: "5.131"
                    });
                    
                    fetch(url + params);
                  }, 6000);
                })
                .catch(error => console.error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°: ${error}`));
            }
          }
        
          setInterval(sendRequest, 10000);
        }
        
        function splitData(data) {
          const values = data.split(", ");
          money += parseInt(values[0].slice(0, -1));
          points += parseInt(values[1].slice(0, -1));
          mmr += parseInt(values[2].substring(1));
          clanPoints += parseInt(values[3].slice(0, -2));
        }
        
        function getLastMessage() {
          const url = "https://api.vk.com/method/messages.getHistory?";
          const params = new URLSearchParams({
            access_token: token,
            peer_id: chatId,
            count: 1,
            v: "5.131"
          });
        
          return fetch(url + params)
            .then(response => response.json())
            .then(responseJson => {
              if (responseJson.error) {
                console.error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ: ${responseJson.error.error_msg}`);
                return null;
              } else {
                const message = responseJson.response.items[0].text;
                return message;
              }
            })
            .catch(error => {
              console.error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ: ${error}`);
              return null;
            });
        }
        
        function start() {
          const token = document.getElementById("token").value;
          while (true) {
            sendCallbackButton();
            console.log("Ð”ÐµÐ´Ð¾Ðº Ð½Ð° Ð°Ñ€ÐµÐ½Ðµ!!!");
            
            while (true) {
              const message = await getLastMessage();
              
              if (message.startsWith('ðŸ¤¡Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð¸Ð³Ñ€Ð°Ð»')) {
                console.log('ÐŸÐ¸ÑÐµÑ† Ð¿Ñ€Ð¾Ð¸Ð³Ñ€Ñ‹Ñˆ((((');
                break;
              } else if (message.startsWith('ðŸ¤‘Ñ‚Ñ‹ Ð²Ñ‹Ð¹Ð³Ñ€Ð°Ð»')) {
                splitData(message.substring(12));
                console.log(`Ð¢Ñ‹ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ð»! ÐžÐ±Ñ‰Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ Ð·Ð° Ð°Ð²Ñ‚Ð¾Ð°Ñ€ÐµÐ½Ñƒ ${money}ðŸª™ Ð¸ ${clanPoints}ðŸŽ–ï¸ ÐºÐ»Ð°Ð½Ð¾Ð²Ñ‹Ñ… Ð¾Ñ‡ÐºÐ¾Ð²`);
                break;
              }
        
              await new Promise(resolve => setTimeout(resolve, 1000));
              
              if (message === "Ð»Ð¸Ð¼Ð¸Ñ‚ ÑƒÐ»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð±Ð¾ÐµÐ² - 100 Ð² Ð´ÐµÐ½ÑŒ") {
                console.log(`Ð£Ñ€Ð°, 100 Ð°Ñ€ÐµÐ½Ñ‹! ÐžÐ±Ñ‰Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð¸Ð»Ð°: ${money}ðŸª™, ${points}â­, ${mmr}ðŸ“ˆ Ð¸ ${clanPoints}ðŸŽ–ï¸ ÐºÐ»Ð°Ð½Ð¾Ð²Ñ‹Ñ… Ð¾Ñ‡ÐºÐ¾Ð²`);
                break;
              }
            }
            
            await new Promise(resolve => setTimeout(resolve, 10000));
          }
        }
    </script>
</body>
</html>
